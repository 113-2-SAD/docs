---
title: "CI/CD åŸºç¤ - GitHub Actions"
icon: Github
---

ç¾ä»£é–‹ç™¼æµç¨‹ **DevOps**å¼·èª¿ **ç‰ˆæœ¬æ§åˆ¶** èˆ‡ **æŒçºŒæ•´åˆ/æŒçºŒéƒ¨ç½² (CI/CD)**ï¼Œé€™ä¸åƒ…èƒ½ç¢ºä¿ç¨‹å¼ç¢¼å“è³ªï¼Œä¹Ÿèƒ½æå‡é–‹ç™¼æ•ˆç‡ã€‚

- **DevOps**ï¼šé–‹ç™¼ (Development) èˆ‡é‹ç‡Ÿ (Operations) çš„ç¸®å¯«ï¼Œæ˜¯ä¸€å€‹çµåˆè»Ÿé«”é–‹ç™¼èˆ‡ IT é‹ç‡Ÿçš„æ–‡åŒ–èˆ‡å¯¦è¸æ–¹æ³•ï¼Œå¼·èª¿é–‹ç™¼åœ˜éšŠèˆ‡é‹ç‡Ÿåœ˜éšŠä¹‹é–“çš„å”ä½œï¼Œæ—¨åœ¨æé«˜è»Ÿé«”äº¤ä»˜é€Ÿåº¦ã€‚
- **æŒçºŒæ•´åˆ (CI)**ï¼šæ¯æ¬¡æäº¤ç¨‹å¼ç¢¼æ™‚ï¼Œè‡ªå‹•åŸ·è¡Œæ•´åˆæ¸¬è©¦ï¼ˆIntegration Testï¼‰ï¼Œç¢ºä¿æ–°åŠŸèƒ½æ²’æœ‰å•é¡Œå¤–ï¼Œä¹Ÿç¢ºä¿èˆŠåŠŸèƒ½æ²’æœ‰è¢«ç ´å£ã€‚
- **æŒçºŒéƒ¨ç½² (CD)**ï¼šç•¶æ¸¬è©¦é€šéå¾Œï¼Œè‡ªå‹•å°‡æ‡‰ç”¨ç¨‹å¼éƒ¨ç½²åˆ°é›²ç«¯ï¼Œä½¿æ–°åŠŸèƒ½èƒ½å¤ å¿«é€Ÿä¸Šç·šã€‚

åœ¨æœ¬ç« ç¯€ï¼Œæˆ‘å€‘å°‡å­¸ç¿’å¦‚ä½•ä½¿ç”¨ **GitHub Actions** è‡ªå‹•åŒ–æ¸¬è©¦èˆ‡éƒ¨ç½²ï¼Œä¸¦æ­é…ä¸Šä¸€ç¯‡çš„ **Playwright** ä¾†é©—è­‰æ‡‰ç”¨ç¨‹å¼çš„é‹ä½œç‹€æ³ã€‚

---

## 1. ç‰ˆæœ¬æ§åˆ¶èˆ‡ GitHub Actions ä»‹ç´¹

### **Gitï¼šç‰ˆæœ¬æ§åˆ¶çš„åŸºç¤**

**Git** æ˜¯é–‹ç™¼åœ˜éšŠå”ä½œçš„æ ¸å¿ƒå·¥å…·ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

âœ… **è¿½è¹¤è®Šæ›´**ï¼šè¨˜éŒ„æ¯ä¸€æ¬¡çš„ç¨‹å¼ç¢¼ä¿®æ”¹ï¼Œæä¾›å›æº¯æ©Ÿåˆ¶ã€‚  
âœ… **åˆ†æ”¯ç®¡ç†**ï¼šé–‹ç™¼æ–°åŠŸèƒ½æ™‚ï¼Œå¯å»ºç«‹ç¨ç«‹çš„åˆ†æ”¯ï¼ˆBranchï¼‰ï¼Œé¿å…å½±éŸ¿ä¸»ç·šï¼ˆMain Branchï¼‰ã€‚  
âœ… **å”ä½œé–‹ç™¼**ï¼šæ”¯æ´å¤šäººé–‹ç™¼ï¼Œé€é Pull Request é€²è¡Œç¨‹å¼ç¢¼å¯©æŸ¥ (Code Review)ã€‚

> Pull Request é¡§åæ€ç¾©ï¼Œå°±æ˜¯ç•¶ä½ æƒ³è¦æäº¤æ–°åŠŸèƒ½æˆ–ä¿®å¾© Bug æ™‚ï¼Œéœ€è¦å‘å°ˆæ¡ˆç®¡ç†è€…ç™¼é€è«‹æ±‚ï¼Œè«‹æ±‚å°æ–¹å°‡ä½ çš„ç¨‹å¼ç¢¼ã€Œæ‹‰ã€åˆ°ä¸»è¦ç¨‹å¼ç¢¼åº«ä¸­ï¼Œåœ¨ GitLab ç­‰å¹³å°ä¸­ï¼Œé€™å€‹åŠŸèƒ½é€šå¸¸è¢«ç¨±ç‚º Merge Requestã€‚

### **GitHub Actionsï¼šè‡ªå‹•åŒ– CI/CD**

**GitHub Actions** æ˜¯ GitHub æä¾›çš„ **CI/CD å¹³å°**ï¼Œå¯ä»¥ç”¨ä¾†ï¼š

âœ… **è‡ªå‹•åŸ·è¡Œæ¸¬è©¦**ï¼šæ¯æ¬¡æ¨é€ (Push) æˆ–å»ºç«‹ Pull Request (PR) æ™‚ï¼ŒåŸ·è¡Œ Playwright æ¸¬è©¦ã€‚  
âœ… **è‡ªå‹•åŒ–éƒ¨ç½²**ï¼šç•¶æ¸¬è©¦é€šéå¾Œï¼Œè‡ªå‹•å°‡æ‡‰ç”¨ç¨‹å¼éƒ¨ç½²è‡³é›²ç«¯ï¼ˆä¸‹é€±å°‡ä»‹ç´¹ï¼ï¼‰ã€‚  
âœ… **æä¾›å³æ™‚å›é¥‹**ï¼šè‹¥æ¸¬è©¦å¤±æ•—ï¼Œæœƒç«‹å³é€šçŸ¥é–‹ç™¼è€…é€²è¡Œä¿®æ­£ã€‚

---

## 2. è¨­å®š GitHub Actions

æˆ‘å€‘å°‡å»ºç«‹ä¸€å€‹ **CI/CD Workflow**ï¼Œè®“ GitHub åœ¨æ¯æ¬¡æ¨é€ç¨‹å¼ç¢¼æ™‚ï¼Œè‡ªå‹•åŸ·è¡Œ **Playwright æ¸¬è©¦**ã€‚

### **æ­¥é©Ÿ 1ï¼šå»ºç«‹ GitHub Actions Workflow**

åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `.github/workflows/ci.yml`ï¼Œä¸¦å¡«å…¥ä»¥ä¸‹å…§å®¹ï¼š

```yaml
name: Playwright Tests
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Install pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 9.12.3
          run_install: false

      - name: Get pnpm store directory
        shell: bash
        run: |
          echo "STORE_PATH=$(pnpm store path --silent)" >> $GITHUB_ENV

      - name: Setup pnpm cache
        uses: actions/cache@v3
        with:
          path: ${{ env.STORE_PATH }}
          key: ${{ runner.os }}-pnpm-store-${{ hashFiles('**/pnpm-lock.yaml') }}
          restore-keys: |
            ${{ runner.os }}-pnpm-store-

      - name: Install Dependencies
        run: pnpm install --frozen-lockfile

      - name: Build Application
        run: pnpm build

      - name: Start MongoDB
        uses: supercharge/mongodb-github-action@1.10.0
        with:
          mongodb-version: "6.0"

      - name: Start Application
        run: pnpm start &
        env:
          NODE_ENV: test
          MONGO_URL: mongodb://localhost:27017
          DB_NAME: sado-test

      - name: Wait for Application to be Ready
        run: |
          for i in {1..10}; do
            if nc -z localhost 3000; then
              echo "Application is up!"
              break
            fi
            echo "Waiting for application..."
            sleep 3
          done

      - name: Install Playwright Browsers
        run: cd apps/frontend && pnpm exec playwright install --with-deps

      - name: Run Tests
        run: pnpm test

      - name: Upload Test Results
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: playwright-report
          path: playwright-report/
          retention-days: 30
```

é€™ä»£è¡¨ç•¶æ¯æ¬¡ **Push** æˆ– **Pull Request** æ™‚ï¼ŒGitHub æœƒçœ‹åˆ°é€™å€‹åœ¨ `.github/workflows` ç›®éŒ„ä¸‹çš„è¨­å®šæª”ä¸¦è‡ªå‹•åŸ·è¡Œç›¸æ‡‰çš„æ¸¬è©¦æµç¨‹ã€‚

---

### **æ­¥é©Ÿ 2ï¼šæ¨é€è‡³ GitHub è§¸ç™¼è‡ªå‹•æ¸¬è©¦**

ç¢ºä¿å°ˆæ¡ˆå·²è¨­å®š Playwright æ¸¬è©¦å¾Œï¼Œå°‡ GitHub Actions è¨­å®šæ¨é€åˆ° **GitHub**ï¼š

```bash
git add .
git commit -m "æ–°å¢ GitHub Actions CI/CD é…ç½®"
git push origin main
```

æ¨é€å¾Œï¼Œå‰å¾€ GitHub **Actions é é¢** (`https://github.com/ä½ çš„å¸³è™Ÿ/ä½ çš„å°ˆæ¡ˆ/actions`)ï¼Œç¢ºèªæ¸¬è©¦æ˜¯å¦æˆåŠŸåŸ·è¡Œã€‚

---

## 3. é€²éšä½¿ç”¨æƒ…å¢ƒ

æƒ³åƒä¸€ä¸‹ï¼Œç•¶ä½ çš„å°ˆæ¡ˆæœ‰å¤šå€‹é–‹ç™¼è€…ã€å¤šå€‹åˆ†æ”¯æ™‚ï¼Œé™¤äº†ç¢ºä¿æ¯æ¬¡æ¨é€çš„ç¨‹å¼ç¢¼æœ¬èº«æ˜¯ç©©å®šçš„ä¹‹å¤–ï¼Œé‚„éœ€è¦ç¢ºä¿åœ¨æ•´åˆåˆ°ä¸»åˆ†æ”¯æ™‚ï¼Œæ•´å€‹æ‡‰ç”¨ç¨‹å¼çš„é‹ä½œç‹€æ³ä»ç„¶æ­£å¸¸ã€‚

è€Œä½¿ç”¨ GitHub æ™‚ï¼Œæˆ‘å€‘é€šå¸¸ä½¿ç”¨ **Pull Request** ä¾†é€²è¡Œç¨‹å¼ç¢¼å¯©æŸ¥ï¼Œé€™æ™‚å€™ï¼Œæˆ‘å€‘å¯ä»¥é€é GitHub Actions ä¾†è‡ªå‹•åŸ·è¡Œæ¸¬è©¦ï¼Œåœ¨äººå·¥å¯©æŸ¥ä¹‹å‰å°±èƒ½å¤ ç™¼ç¾å•é¡Œã€‚

---

## 4. ç¸½çµ

ä»Šå¤©ï¼Œæˆ‘å€‘å­¸ç¿’äº†ï¼š

ğŸš€ **å¦‚ä½•é€é GitHub Actions è‡ªå‹•åŸ·è¡Œ Playwright æ¸¬è©¦**  
ğŸ­ **å¦‚ä½•æ’°å¯« CI/CD æµç¨‹ï¼Œç¢ºä¿ç¨‹å¼ç¢¼å“è³ª**

ä¸‹é€±ï¼Œæˆ‘å€‘å°‡å­¸ç¿’æ›´é€²éšçš„ CI/CD æŠ€å·§ï¼ŒåŒ…æ‹¬**å¦‚ä½•ä½¿ç”¨ Docker Compose éƒ¨ç½²å…¨ç«¯æ‡‰ç”¨ç¨‹å¼è‡³é›²ç«¯åŸç”Ÿç’°å¢ƒ**ã€‚æ•¬è«‹æœŸå¾…ï¼
